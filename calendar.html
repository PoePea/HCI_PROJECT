<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>ðŸ“… Calendar - WorkINPro</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f3f2ef;
    }

    .header {
      background: white;
      box-shadow: 0 1px 5px rgba(0, 0, 0, 0.1);
      padding: 10px 30px;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
    }

    .logo-search {
      display: flex;
      align-items: center;
      flex: 1;
      min-width: 250px;
    }

    .logo {
      font-size: 24px;
      font-weight: bold;
      color: red;
      margin-right: 20px;
      white-space: nowrap;
    }

    .in-box {
      border: 2px solid red;
      padding: 0 4px;
      border-radius: 4px;
      color: red;
    }

    .search-bar {
      flex: 1;
      max-width: 400px;
      padding: 8px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }

    .nav-bar {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 15px;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      color: #333;
      font-weight: 500;
      font-size: 14px;
      position: relative;
    }

    .nav-item.active::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 0;
      width: 100%;
      height: 2px;
      background-color: red;
    }

    .nav-item img {
      width: 24px;
      height: 24px;
      margin-bottom: 4px;
    }

    .content {
      padding: 70px;
      text-align: center;
    }

    .calendar-section {
      max-width: 1200px;
      margin: 20px auto;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      align-items: center;
      margin-bottom: 0px;
    }

    .calendar-header select, .calendar-header button {
      padding: 8px;
      font-size: 16px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      margin-top: 10px;
    }

    th, td {
      border: 1px solid #ccc;
      width: 14.28%;
      height: 60px;
      text-align: center;
      vertical-align: top;
      padding: 4px;
      position: relative;
      cursor: pointer;
    }

    th {
      background-color: #f0f0f0;
      font-weight: bold;
    }

    .today {
      background-color: #c8e6c9;
    }

    .event {
      background-color: #ffeb3b;
      font-size: 12px;
      margin-top: 5px;
      padding: 2px 4px;
      border-radius: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: default;
    }

    .event .delete-btn {
      color: #b00020;
      font-weight: bold;
      margin-left: 8px;
      cursor: pointer;
      font-size: 14px;
      line-height: 1;
      border: none;
      background: none;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    .month-container {
      border: 1px solid #ccc;
      border-radius: 8px;
      background: white;
      padding: 10px;
      cursor: pointer;
    }

    .month-container:hover {
      background: #f9f9f9;
    }

    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
    }

    .modal-content {
      background-color: white;
      margin: 10% auto;
      padding: 20px;
      width: 300px;
      border-radius: 8px;
      position: relative;
    }

    .close {
      position: absolute;
      top: 10px;
      right: 20px;
      font-size: 24px;
      cursor: pointer;
    }

    .event-input {
      width: 100%;
      padding: 8px;
      margin: 8px 0;
    }

    .dropdown {
      position: relative;
    }

    .dropbtn {
      background-color: transparent;
      border: none;
      font-weight: 500;
      cursor: pointer;
      text-align: center;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: white;
      min-width: 220px;
      box-shadow: 0px 4px 6px rgba(0,0,0,0.1);
      z-index: 1;
      margin-top: 8px;
    }

    .dropdown-content a {
      color: #333;
      padding: 10px 15px;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {
      background-color: #f1f1f1;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    .nav-item.dropdown:hover .dropdown-content {
      display: block;
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo-search">
        <div class="logo">Work<span class="in-box">IN</span>Pro</div>
        <input type="text" class="search-bar" placeholder="Search WorkINPro...">
      </div>
      <nav class="nav-bar">
        <a class="nav-item" href="index.html"><img src="elements/home.png" alt="Home">Home</a>
        <a class="nav-item" href="job.html"><img src="elements/job.png" alt="Job">Job</a>
        <a class="nav-item" href="about.html"><img src="elements/about.png" alt="About">About</a>
        <a class="nav-item" href="contact.html"><img src="elements/contact.png" alt="Contact">Contact</a>
        <a class="nav-item active" href="calendar.html"><img src="elements/calendar.png" alt="Calendar">Calendar</a>
        <div class="nav-item dropdown">
          <img src="elements/tan.png" alt="Profile">
          <button class="dropbtn">Profile</button>
          <div class="dropdown-content">
            <a href="profile.html">View Profile</a>
            <a href="#">Settings & Privacy</a>
            <a href="#">Help</a>
            <a href="#">Language</a>
            <a href="#">Manage</a>
            <a href="#">Posts & Activity</a>
            <a href="#" onclick="window.location.href='login.html'">Sign Out</a>
          </div>
        </div>
      </nav>
    </div>
  </header>

  <div class="content">
    <h1>ðŸ“… Calendar</h1>
    <p>Stay on top of your schedule! Use the tools below to view, add, and manage your events efficiently.</p>
  </div>

  <div class="calendar-section">
    <div class="calendar-header">
      <div>
        <select id="month"></select>
        <select id="year"></select>
      </div>
      <div>
        <button onclick="prevMonth()">Previous</button>
        <button onclick="nextMonth()">Next</button>
        <button onclick="renderAllMonthsView(currentYear)">View All Months</button>
      </div>
    </div>

    <div id="calendar-container"></div>
  </div>

  <div id="event-modal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeModal()">&times;</span>
      <h3 id="modal-date"></h3>
      <input type="text" id="event-text" class="event-input" placeholder="Event description">
      <input type="time" id="event-time" class="event-input">
      <button onclick="addEvent()">Add Event</button>
    </div>
  </div>

  <script>
    const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
    let currentMonth = new Date().getMonth();
    let currentYear = new Date().getFullYear();
    let events = JSON.parse(localStorage.getItem("events")) || {};
    let selectedDate = "";

    const monthSelect = document.getElementById("month");
    const yearSelect = document.getElementById("year");
    const calendarContainer = document.getElementById("calendar-container");

    for (let i = 0; i < 12; i++) {
      let opt = document.createElement("option");
      opt.value = i;
      opt.textContent = monthNames[i];
      if (i === currentMonth) opt.selected = true;
      monthSelect.appendChild(opt);
    }

    for (let y = 2015; y <= 2070; y++) {
      let opt = document.createElement("option");
      opt.value = y;
      opt.textContent = y;
      if (y === currentYear) opt.selected = true;
      yearSelect.appendChild(opt);
    }

    monthSelect.onchange = () => {
      currentMonth = parseInt(monthSelect.value);
      renderCalendar(currentMonth, currentYear);
    };
    yearSelect.onchange = () => {
      currentYear = parseInt(yearSelect.value);
      renderCalendar(currentMonth, currentYear);
    };

    function renderCalendar(month, year) {
      calendarContainer.innerHTML = "";
      const table = createMonthTable(month, year);
      calendarContainer.appendChild(table);
    }

    function createMonthTable(month, year) {
      const table = document.createElement("table");
      table.innerHTML = `<tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr>`;
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      let date = 1;

      for (let i = 0; i < 6; i++) {
        const row = document.createElement("tr");
        for (let j = 0; j < 7; j++) {
          const cell = document.createElement("td");
          if (i === 0 && j < firstDay) {
            cell.innerHTML = "";
          } else if (date > daysInMonth) {
            break;
          } else {
            const thisDate = `${year}-${month + 1}-${date}`;
            cell.innerHTML = `<div>${date}</div>`;
            cell.onclick = () => openModal(thisDate);
            if (isToday(date, month, year)) {
              cell.classList.add("today");
            }
            if (events[thisDate]) {
              events[thisDate].forEach((e, idx) => {
                const evt = document.createElement("div");
                evt.className = "event";
                evt.innerHTML = `${e.time} ${e.text} <button class='delete-btn' onclick='deleteEvent("${thisDate}", ${idx}); event.stopPropagation();'>x</button>`;
                cell.appendChild(evt);
              });
            }
            date++;
          }
          row.appendChild(cell);
        }
        table.appendChild(row);
      }
      return table;
    }

    function isToday(day, month, year) {
      const today = new Date();
      return day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
    }

    function renderAllMonthsView(year) {
      calendarContainer.innerHTML = "";
      const grid = document.createElement("div");
      grid.className = "calendar-grid";

      for (let month = 0; month < 12; month++) {
        const monthDiv = document.createElement("div");
        monthDiv.className = "month-container";
        const title = document.createElement("h3");
        title.textContent = `${monthNames[month]} ${year}`;
        monthDiv.appendChild(title);
        const table = createMonthTable(month, year);
        monthDiv.appendChild(table);
        monthDiv.onclick = () => {
          currentMonth = month;
          monthSelect.value = month;
          renderCalendar(currentMonth, year);
        };
        grid.appendChild(monthDiv);
      }

      calendarContainer.appendChild(grid);
    }

    function openModal(date) {
      selectedDate = date;
      document.getElementById("modal-date").textContent = `Add Event for ${date}`;
      document.getElementById("event-modal").style.display = "block";
    }

    function closeModal() {
      document.getElementById("event-modal").style.display = "none";
    }

    function addEvent() {
      const text = document.getElementById("event-text").value.trim();
      const time = document.getElementById("event-time").value;
      if (!text || !time) return;
      if (!events[selectedDate]) events[selectedDate] = [];
      events[selectedDate].push({ text, time });
      localStorage.setItem("events", JSON.stringify(events));
      closeModal();
      renderCalendar(currentMonth, currentYear);
    }

    function deleteEvent(date, index) {
      if (events[date]) {
        events[date].splice(index, 1);
        if (events[date].length === 0) delete events[date];
        localStorage.setItem("events", JSON.stringify(events));
        renderCalendar(currentMonth, currentYear);
      }
    }

    function prevMonth() {
      if (--currentMonth < 0) {
        currentMonth = 11;
        currentYear--;
      }
      monthSelect.value = currentMonth;
      yearSelect.value = currentYear;
      renderCalendar(currentMonth, currentYear);
    }

    function nextMonth() {
      if (++currentMonth > 11) {
        currentMonth = 0;
        currentYear++;
      }
      monthSelect.value = currentMonth;
      yearSelect.value = currentYear;
      renderCalendar(currentMonth, currentYear);
    }

    renderCalendar(currentMonth, currentYear);
  </script>
</body>
</html>
